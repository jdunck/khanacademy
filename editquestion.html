<html>
  <head>
    <link type="text/css" rel="stylesheet" href="/stylesheets/stylesheet.css" />
    <script language="JavaScript" type="text/javascript" src="/javascript/rte/richtext_compressed.js"></script>
    <script type="text/javascript" src="/javascript/jquery.js"></script>
    <script type="text/javascript" src="/javascript/ckeditor/ckeditor.js"></script>
    <script>
    function addQuestion(drop_down)
    {
    	var selected_subject = drop_down.selectedIndex;
	var subject_key = drop_down[selected_subject].value;
	window.location = "/pickquestiontopic?subject_key="+subject_key
    }
    
    function practiceQuestion(drop_down)
    {
    	var selected_subject = drop_down.selectedIndex;
	var subject_key = drop_down[selected_subject].value;
	window.location = "/pickquiztopic?subject_key="+subject_key
    }
    
    </script>
  </head>

  <body>
  <table width=100%>
  <tr>
  	<td valign=top align=left rowspan=2><A href="/qbrary"><img src="/images/logo.gif" width=150 height=100></A></td>
  	<td valign=top align=right><h4>{{greeting}}</H4>
	
	
	</td>
  </tr>
  <tr>
  	<td valign=center align=right> 
	<b>
	 <A href="/qbrary">Manage Questions</a>&nbsp;&nbsp;|&nbsp;&nbsp;
	 <SELECT id="add_question" onchange="practiceQuestion(this)">
			<OPTION VALUE="0" SELECTED>Practice questions in...</OPTION>
			{% for subject in subjects %}
				<OPTION VALUE="{{ subject.key }}">{{subject.name}}</OPTION>
			{% endfor %}
	 </SELECT>
	 &nbsp;&nbsp;|&nbsp;&nbsp;
	 <SELECT id="add_question" onchange="addQuestion(this)">
			<OPTION VALUE="0" SELECTED>Add a question in...</OPTION>
				{% for subject in subjects %}
					<OPTION VALUE="{{ subject.key }}">{{subject.name}}</OPTION>
				{% endfor %}
	</SELECT>
	</b>
	
	</td>
  </tr>
  
  </table>
  <P>
 <table width=100% border=0 cellpadding=0 cellspacing=0>
  <tr>
    <td bgcolor=#003399><img width=1 height=1 alt=""></td>
  </tr>
</table><table width=100% border=0 cellpadding=2 cellspacing=0>
   <tr>
    <td bgcolor=#e5ecf9 align=left><B>{{mode_text}}</B></td>

  </tr>
</table>
  
  <h2>{{ message_text }}</h2>
  	
	<P>
	
	<center>
	<form name="mainform" action="/editquestion" method="get">
	<script language="JavaScript" type="text/javascript">
		<!--
			//-->
		</script>
		<input type="hidden" name="question_key" value ="{{question.key}}">
		<table id="table_content">
		<tr>
			<td align=right valign=top><h3>Subject:</h3></td>
			<td align=left valign=top><h3>
			{% for b in breadcrumb %}
				{{ b.name }}:
			{% endfor %}
			{{ question.subject.name }}
			</h3></td>
			
		</tr>
		<tr>
			<td align=right valign=top><h3>Question:</h3></td>
			<td align=left>
				<textarea id="question_text" name="question_text">{{question.question_text}}</textarea>
			</td>
		</tr>
		<tr>
			<td align=right valign=top><h3>Correct Answer:</h3></td>
			<td align=left>
				<textarea id="correct_choice_text" name="correct_choice_text">{{question.correct_choice_text}}</textarea>
			</td>
		</tr>
		<tr>
			<td align=right valign=top><h3>Incorrect Choice 1:</h3></td>
			<td align=left>
				<textarea id="incorrect_1" name="incorrect_1">{{question.incorrect_1}}</textarea>
			</td>
		</tr>
		<tr>
			<td align=right valign=top><h3>Incorrect Choice 2:</h3></td>
			<td align=left>
				<textarea id="incorrect_2" name="incorrect_2">{{question.incorrect_2}}</textarea>
			</td>
		</tr>
		<tr>
			<td align=right valign=top><h3>Incorrect Choice 3:</h3></td>
			<td align=left>
				<textarea id="incorrect_3" name="incorrect_3">{{question.incorrect_3}}</textarea>
			</td>
		</tr>
		<tr>
			<td align=right valign=top><h3>Incorrect Choice 4:</h3></td>
			<td align=left>
				<textarea id="incorrect_4" name="incorrect_4">{{question.incorrect_4}}</textarea>
			</td>
		</tr>
		<tr>
			<td align=right valign=top><h3>Incorrect Choice 5:</h3></td>
			<td align=left>
				<textarea id="incorrect_5" name="incorrect_5">{{question.incorrect_5}}</textarea>
			</td>
		</tr>
		<tr>
			<td align=right valign=top><h3>Explanation of answer:</h3></td>
			<td align=left>
				<textarea id="answer_text" name="answer_text">{{question.answer_text}}</textarea>
			</td>
		</tr>
		</table>
		<center><input type="submit" value="{{button_text}}"></center>
		<script>
			// Swap in CKEditors
			$("#table_content textarea").each(function() {
				CKEDITOR.replace(this.id,
					{
						toolbar :
						[[ 
							'Bold', 'Italic', 'Underline', '-', 
							'JustifyLeft', 'JustifyCenter', 'JustifyRight', '-',
							'HorizontalRule', 'NumberedList', 'BulletedList', '-', 
							'Outdent', 'Indent', '-',
							'Link', 'Image', 'Table', 'SpecialChar'
						], '/',
						[
							'Format', 'Font', 'FontSize', 'TextColor', 'BGColor'
						]],
						skin : 'kama',
						toolbarCanCollapse: false,
						removePlugins : 'elementspath',
						resize_minWidth: 300,
						width: 600,
						height: (this.id == "question_text" ? 300 : 100),
						scayt_autoStartup: false,
						disableNativeSpellChecker: false
					});
			});

			// After swapping in all CKEditors make sure we're scrolled to the top of the page
			document.body.scrollTop = 0;
		</script>
	</form>
	</center>
  </body>
</html>

